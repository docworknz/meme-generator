{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/dongwsl/cursor_video/instant.schema.ts"],"sourcesContent":["import { i } from \"@instantdb/react\";\n\nconst _schema = i.schema({\n  entities: {\n    $files: i.entity({\n      path: i.string().unique().indexed(),\n      url: i.string(),\n    }),\n    $users: i.entity({\n      email: i.string().unique().indexed().optional(),\n    }),\n    memes: i.entity({\n      createdAt: i.date(),\n    }),\n    upvotes: i.entity({}),\n  },\n  links: {\n    memeImage: {\n      forward: { on: \"memes\", has: \"one\", label: \"image\" },\n      reverse: { on: \"$files\", has: \"many\", label: \"memes\" },\n    },\n    memeAuthor: {\n      forward: { on: \"memes\", has: \"one\", label: \"author\" },\n      reverse: { on: \"$users\", has: \"many\", label: \"memes\" },\n    },\n    upvoteMeme: {\n      forward: { on: \"upvotes\", has: \"one\", label: \"meme\" },\n      reverse: { on: \"memes\", has: \"many\", label: \"upvotes\" },\n    },\n    upvoteUser: {\n      forward: { on: \"upvotes\", has: \"one\", label: \"$user\" },\n      reverse: { on: \"$users\", has: \"many\", label: \"upvotes\" },\n    },\n  },\n  rooms: {},\n});\n\ntype _AppSchema = typeof _schema;\ninterface AppSchema extends _AppSchema {}\nconst schema: AppSchema = _schema;\n\nexport type { AppSchema };\nexport default schema;\n"],"names":[],"mappings":";;;;AAAA;AAAA;;AAEA,MAAM,UAAU,oKAAC,CAAC,MAAM,CAAC;IACvB,UAAU;QACR,QAAQ,oKAAC,CAAC,MAAM,CAAC;YACf,MAAM,oKAAC,CAAC,MAAM,GAAG,MAAM,GAAG,OAAO;YACjC,KAAK,oKAAC,CAAC,MAAM;QACf;QACA,QAAQ,oKAAC,CAAC,MAAM,CAAC;YACf,OAAO,oKAAC,CAAC,MAAM,GAAG,MAAM,GAAG,OAAO,GAAG,QAAQ;QAC/C;QACA,OAAO,oKAAC,CAAC,MAAM,CAAC;YACd,WAAW,oKAAC,CAAC,IAAI;QACnB;QACA,SAAS,oKAAC,CAAC,MAAM,CAAC,CAAC;IACrB;IACA,OAAO;QACL,WAAW;YACT,SAAS;gBAAE,IAAI;gBAAS,KAAK;gBAAO,OAAO;YAAQ;YACnD,SAAS;gBAAE,IAAI;gBAAU,KAAK;gBAAQ,OAAO;YAAQ;QACvD;QACA,YAAY;YACV,SAAS;gBAAE,IAAI;gBAAS,KAAK;gBAAO,OAAO;YAAS;YACpD,SAAS;gBAAE,IAAI;gBAAU,KAAK;gBAAQ,OAAO;YAAQ;QACvD;QACA,YAAY;YACV,SAAS;gBAAE,IAAI;gBAAW,KAAK;gBAAO,OAAO;YAAO;YACpD,SAAS;gBAAE,IAAI;gBAAS,KAAK;gBAAQ,OAAO;YAAU;QACxD;QACA,YAAY;YACV,SAAS;gBAAE,IAAI;gBAAW,KAAK;gBAAO,OAAO;YAAQ;YACrD,SAAS;gBAAE,IAAI;gBAAU,KAAK;gBAAQ,OAAO;YAAU;QACzD;IACF;IACA,OAAO,CAAC;AACV;AAIA,MAAM,SAAoB;uCAGX"}},
    {"offset": {"line": 86, "column": 0}, "map": {"version":3,"sources":["file:///home/dongwsl/cursor_video/lib/db.ts"],"sourcesContent":["import { init } from \"@instantdb/react\";\nimport schema from \"@/instant.schema\";\n\nconst appId = process.env.NEXT_PUBLIC_INSTANT_APP_ID!;\n\nexport const db = init({\n  appId,\n  schema,\n  useDateObjects: true,\n});\n"],"names":[],"mappings":";;;;AAGc;AAHd;AAAA;AACA;;;AAEA,MAAM;AAEC,MAAM,KAAK,IAAA,sKAAI,EAAC;IACrB;IACA,QAAA,+HAAM;IACN,gBAAgB;AAClB"}},
    {"offset": {"line": 109, "column": 0}, "map": {"version":3,"sources":["file:///home/dongwsl/cursor_video/app/components/AppShell.tsx"],"sourcesContent":["\"use client\";\n\nimport Link from \"next/link\";\nimport { usePathname } from \"next/navigation\";\nimport { db } from \"@/lib/db\";\n\nexport function AppShell({ children }: { children: React.ReactNode }) {\n  const pathname = usePathname();\n  const user = db.useUser();\n\n  return (\n    <div className=\"min-h-screen flex flex-col\">\n      <header className=\"sticky top-0 z-10 border-b border-[var(--border)] bg-[var(--bg)]\">\n        <div className=\"max-w-4xl mx-auto px-4 h-12 flex items-center justify-between\">\n          <nav className=\"flex items-center gap-6\">\n            <Link\n              href=\"/\"\n              className={`text-sm font-medium ${pathname === \"/\" ? \"text-[var(--accent)]\" : \"text-[var(--muted)] hover:text-[var(--text)]\"}`}\n            >\n              Create\n            </Link>\n            <Link\n              href=\"/gallery\"\n              className={`text-sm font-medium ${pathname === \"/gallery\" ? \"text-[var(--accent)]\" : \"text-[var(--muted)] hover:text-[var(--text)]\"}`}\n            >\n              Gallery\n            </Link>\n          </nav>\n          <div className=\"flex items-center gap-3\">\n            <span className=\"text-xs text-[var(--muted)] truncate max-w-[160px]\" title={user?.email ?? \"\"}>\n              {user?.email ?? \"\"}\n            </span>\n            <button\n              type=\"button\"\n              onClick={() => db.auth.signOut()}\n              className=\"text-xs text-[var(--muted)] hover:text-[var(--text)]\"\n            >\n              Sign out\n            </button>\n          </div>\n        </div>\n      </header>\n      <main className=\"flex-1\">{children}</main>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;;;AAJA;;;;AAMO,SAAS,SAAS,EAAE,QAAQ,EAAiC;;IAClE,MAAM,WAAW,IAAA,oJAAW;IAC5B,MAAM,OAAO,kHAAE,CAAC,OAAO;IAEvB,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAO,WAAU;0BAChB,cAAA,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BAAI,WAAU;;8CACb,6LAAC,0KAAI;oCACH,MAAK;oCACL,WAAW,CAAC,oBAAoB,EAAE,aAAa,MAAM,yBAAyB,gDAAgD;8CAC/H;;;;;;8CAGD,6LAAC,0KAAI;oCACH,MAAK;oCACL,WAAW,CAAC,oBAAoB,EAAE,aAAa,aAAa,yBAAyB,gDAAgD;8CACtI;;;;;;;;;;;;sCAIH,6LAAC;4BAAI,WAAU;;8CACb,6LAAC;oCAAK,WAAU;oCAAqD,OAAO,MAAM,SAAS;8CACxF,MAAM,SAAS;;;;;;8CAElB,6LAAC;oCACC,MAAK;oCACL,SAAS,IAAM,kHAAE,CAAC,IAAI,CAAC,OAAO;oCAC9B,WAAU;8CACX;;;;;;;;;;;;;;;;;;;;;;;0BAMP,6LAAC;gBAAK,WAAU;0BAAU;;;;;;;;;;;;AAGhC;GAvCgB;;QACG,oJAAW;QACf,kHAAE,CAAC;;;KAFF"}},
    {"offset": {"line": 232, "column": 0}, "map": {"version":3,"sources":["file:///home/dongwsl/cursor_video/app/components/Login.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useRef } from \"react\";\nimport { db } from \"@/lib/db\";\n\nexport function Login() {\n  const [sentEmail, setSentEmail] = useState(\"\");\n  const [error, setError] = useState(\"\");\n  const emailRef = useRef<HTMLInputElement>(null);\n  const codeRef = useRef<HTMLInputElement>(null);\n\n  if (!sentEmail) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center p-4\">\n        <div className=\"w-full max-w-sm\">\n          <h1 className=\"text-xl font-semibold text-[var(--text)] mb-2\">\n            Sign in\n          </h1>\n          <p className=\"text-sm text-[var(--muted)] mb-4\">\n            Enter your email and we will send you a 6-digit code to sign in.\n          </p>\n          <form\n            className=\"flex flex-col gap-3\"\n            onSubmit={(e) => {\n              e.preventDefault();\n              const email = emailRef.current?.value?.trim();\n              if (!email) return;\n              setError(\"\");\n              setSentEmail(email);\n              db.auth.sendMagicCode({ email }).catch((err) => {\n                setError(err?.body?.message ?? \"Failed to send code\");\n                setSentEmail(\"\");\n              });\n            }}\n          >\n            <input\n              ref={emailRef}\n              type=\"email\"\n              placeholder=\"you@example.com\"\n              required\n              autoFocus\n              className=\"w-full px-3 py-2 rounded-lg border border-[var(--border)] bg-[var(--surface)] text-[var(--text)] placeholder:text-[var(--muted)] focus:outline-none focus:border-[var(--accent)]\"\n            />\n            {error && (\n              <p className=\"text-sm text-red-400\">{error}</p>\n            )}\n            <button\n              type=\"submit\"\n              className=\"w-full py-2 rounded-lg bg-[var(--accent)] text-black font-medium hover:bg-[var(--accent-hover)] transition-colors\"\n            >\n              Send code\n            </button>\n          </form>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center p-4\">\n      <div className=\"w-full max-w-sm\">\n        <h1 className=\"text-xl font-semibold text-[var(--text)] mb-2\">\n          Enter code\n        </h1>\n        <p className=\"text-sm text-[var(--muted)] mb-4\">\n          We sent a 6-digit code to <strong className=\"text-[var(--text)]\">{sentEmail}</strong>. Enter it below.\n        </p>\n        <form\n          className=\"flex flex-col gap-3\"\n          onSubmit={(e) => {\n            e.preventDefault();\n            const code = codeRef.current?.value?.trim();\n            if (!code) return;\n            setError(\"\");\n            db.auth.signInWithMagicCode({ email: sentEmail, code }).catch((err) => {\n              setError(err?.body?.message ?? \"Invalid code\");\n              if (codeRef.current) codeRef.current.value = \"\";\n            });\n          }}\n        >\n          <input\n            ref={codeRef}\n            type=\"text\"\n            inputMode=\"numeric\"\n            autoComplete=\"one-time-code\"\n            placeholder=\"123456\"\n            maxLength={6}\n            required\n            autoFocus\n            className=\"w-full px-3 py-2 rounded-lg border border-[var(--border)] bg-[var(--surface)] text-[var(--text)] placeholder:text-[var(--muted)] focus:outline-none focus:border-[var(--accent)] text-center tracking-[0.5em] font-mono text-lg\"\n          />\n          {error && (\n            <p className=\"text-sm text-red-400\">{error}</p>\n          )}\n          <button\n            type=\"submit\"\n            className=\"w-full py-2 rounded-lg bg-[var(--accent)] text-black font-medium hover:bg-[var(--accent-hover)] transition-colors\"\n          >\n            Verify\n          </button>\n          <button\n            type=\"button\"\n            className=\"w-full py-2 text-sm text-[var(--muted)] hover:text-[var(--text)]\"\n            onClick={() => setSentEmail(\"\")}\n          >\n            Use a different email\n          </button>\n        </form>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;;;AAHA;;;AAKO,SAAS;;IACd,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yKAAQ,EAAC;IAC3C,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAC;IACnC,MAAM,WAAW,IAAA,uKAAM,EAAmB;IAC1C,MAAM,UAAU,IAAA,uKAAM,EAAmB;IAEzC,IAAI,CAAC,WAAW;QACd,qBACE,6LAAC;YAAI,WAAU;sBACb,cAAA,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAG,WAAU;kCAAgD;;;;;;kCAG9D,6LAAC;wBAAE,WAAU;kCAAmC;;;;;;kCAGhD,6LAAC;wBACC,WAAU;wBACV,UAAU,CAAC;4BACT,EAAE,cAAc;4BAChB,MAAM,QAAQ,SAAS,OAAO,EAAE,OAAO;4BACvC,IAAI,CAAC,OAAO;4BACZ,SAAS;4BACT,aAAa;4BACb,kHAAE,CAAC,IAAI,CAAC,aAAa,CAAC;gCAAE;4BAAM,GAAG,KAAK,CAAC,CAAC;gCACtC,SAAS,KAAK,MAAM,WAAW;gCAC/B,aAAa;4BACf;wBACF;;0CAEA,6LAAC;gCACC,KAAK;gCACL,MAAK;gCACL,aAAY;gCACZ,QAAQ;gCACR,SAAS;gCACT,WAAU;;;;;;4BAEX,uBACC,6LAAC;gCAAE,WAAU;0CAAwB;;;;;;0CAEvC,6LAAC;gCACC,MAAK;gCACL,WAAU;0CACX;;;;;;;;;;;;;;;;;;;;;;;IAOX;IAEA,qBACE,6LAAC;QAAI,WAAU;kBACb,cAAA,6LAAC;YAAI,WAAU;;8BACb,6LAAC;oBAAG,WAAU;8BAAgD;;;;;;8BAG9D,6LAAC;oBAAE,WAAU;;wBAAmC;sCACpB,6LAAC;4BAAO,WAAU;sCAAsB;;;;;;wBAAmB;;;;;;;8BAEvF,6LAAC;oBACC,WAAU;oBACV,UAAU,CAAC;wBACT,EAAE,cAAc;wBAChB,MAAM,OAAO,QAAQ,OAAO,EAAE,OAAO;wBACrC,IAAI,CAAC,MAAM;wBACX,SAAS;wBACT,kHAAE,CAAC,IAAI,CAAC,mBAAmB,CAAC;4BAAE,OAAO;4BAAW;wBAAK,GAAG,KAAK,CAAC,CAAC;4BAC7D,SAAS,KAAK,MAAM,WAAW;4BAC/B,IAAI,QAAQ,OAAO,EAAE,QAAQ,OAAO,CAAC,KAAK,GAAG;wBAC/C;oBACF;;sCAEA,6LAAC;4BACC,KAAK;4BACL,MAAK;4BACL,WAAU;4BACV,cAAa;4BACb,aAAY;4BACZ,WAAW;4BACX,QAAQ;4BACR,SAAS;4BACT,WAAU;;;;;;wBAEX,uBACC,6LAAC;4BAAE,WAAU;sCAAwB;;;;;;sCAEvC,6LAAC;4BACC,MAAK;4BACL,WAAU;sCACX;;;;;;sCAGD,6LAAC;4BACC,MAAK;4BACL,WAAU;4BACV,SAAS,IAAM,aAAa;sCAC7B;;;;;;;;;;;;;;;;;;;;;;;AAOX;GA1GgB;KAAA"}},
    {"offset": {"line": 454, "column": 0}, "map": {"version":3,"sources":["file:///home/dongwsl/cursor_video/app/gallery/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { db } from \"@/lib/db\";\nimport { AppShell } from \"../components/AppShell\";\nimport { Login } from \"../components/Login\";\nimport { id } from \"@instantdb/react\";\n\nfunction GalleryContent() {\n  const user = db.useUser();\n  const { isLoading, error, data } = db.useQuery({\n    memes: {\n      image: {},\n      author: {},\n      upvotes: { $user: {} },\n      $: { order: { serverCreatedAt: \"desc\" } },\n    },\n  });\n\n  if (isLoading) {\n    return (\n      <div className=\"flex items-center justify-center min-h-[40vh]\">\n        <p className=\"text-[var(--muted)]\">Loading...</p>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"p-4 text-red-400\">\n        Error: {error.message}\n      </div>\n    );\n  }\n\n  const memes = data?.memes ?? [];\n\n  const toggleUpvote = async (memeId: string) => {\n    if (!user?.id) return;\n    const meme = memes.find((m) => m.id === memeId);\n    if (!meme?.upvotes) return;\n    const existing = meme.upvotes.find(\n      (u: { $user?: { id: string } }) => u.$user?.id === user.id\n    );\n    if (existing) {\n      await db.transact(db.tx.upvotes[existing.id].delete());\n    } else {\n      const upvoteId = id();\n      await db.transact(\n        db.tx.upvotes[upvoteId].update({}).link({ meme: memeId, $user: user.id })\n      );\n    }\n  };\n\n  return (\n    <div className=\"max-w-4xl mx-auto px-4 py-6\">\n      <h1 className=\"text-lg font-semibold text-[var(--text)] mb-4\">Gallery</h1>\n      {memes.length === 0 ? (\n        <p className=\"text-[var(--muted)]\">No memes yet. Create one from the Create page.</p>\n      ) : (\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\n          {memes.map((meme) => {\n            const imageUrl = meme.image?.url;\n            const upvoteCount = meme.upvotes?.length ?? 0;\n            const hasUpvoted = meme.upvotes?.some(\n              (u: { $user?: { id: string } }) => u.$user?.id === user?.id\n            );\n            return (\n              <article\n                key={meme.id}\n                className=\"rounded-xl border border-[var(--border)] bg-[var(--surface)] overflow-hidden\"\n              >\n                {imageUrl ? (\n                  <img\n                    src={imageUrl}\n                    alt=\"Meme\"\n                    className=\"w-full aspect-auto object-contain bg-[#1a1a1a]\"\n                  />\n                ) : (\n                  <div className=\"w-full aspect-video bg-[#2a2a2a] flex items-center justify-center text-[var(--muted)] text-sm\">\n                    Loading image...\n                  </div>\n                )}\n                <div className=\"p-3 flex items-center justify-between\">\n                  <button\n                    type=\"button\"\n                    onClick={() => toggleUpvote(meme.id)}\n                    disabled={!user?.id}\n                    className={`flex items-center gap-1.5 text-sm font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed ${\n                      hasUpvoted\n                        ? \"text-[var(--accent)]\"\n                        : \"text-[var(--muted)] hover:text-[var(--text)]\"\n                    }`}\n                    title={user ? (hasUpvoted ? \"Remove upvote\" : \"Upvote\") : \"Sign in to upvote\"}\n                  >\n                    <span className=\"tabular-nums\">{upvoteCount}</span>\n                    <span>upvote</span>\n                  </button>\n                </div>\n              </article>\n            );\n          })}\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default function GalleryPage() {\n  return (\n    <>\n      <db.SignedIn>\n        <AppShell>\n          <GalleryContent />\n        </AppShell>\n      </db.SignedIn>\n      <db.SignedOut>\n        <Login />\n      </db.SignedOut>\n    </>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AAAA;;;AALA;;;;;AAOA,SAAS;;IACP,MAAM,OAAO,kHAAE,CAAC,OAAO;IACvB,MAAM,EAAE,SAAS,EAAE,KAAK,EAAE,IAAI,EAAE,GAAG,kHAAE,CAAC,QAAQ,CAAC;QAC7C,OAAO;YACL,OAAO,CAAC;YACR,QAAQ,CAAC;YACT,SAAS;gBAAE,OAAO,CAAC;YAAE;YACrB,GAAG;gBAAE,OAAO;oBAAE,iBAAiB;gBAAO;YAAE;QAC1C;IACF;IAEA,IAAI,WAAW;QACb,qBACE,6LAAC;YAAI,WAAU;sBACb,cAAA,6LAAC;gBAAE,WAAU;0BAAsB;;;;;;;;;;;IAGzC;IAEA,IAAI,OAAO;QACT,qBACE,6LAAC;YAAI,WAAU;;gBAAmB;gBACxB,MAAM,OAAO;;;;;;;IAG3B;IAEA,MAAM,QAAQ,MAAM,SAAS,EAAE;IAE/B,MAAM,eAAe,OAAO;QAC1B,IAAI,CAAC,MAAM,IAAI;QACf,MAAM,OAAO,MAAM,IAAI,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK;QACxC,IAAI,CAAC,MAAM,SAAS;QACpB,MAAM,WAAW,KAAK,OAAO,CAAC,IAAI,CAChC,CAAC,IAAkC,EAAE,KAAK,EAAE,OAAO,KAAK,EAAE;QAE5D,IAAI,UAAU;YACZ,MAAM,kHAAE,CAAC,QAAQ,CAAC,kHAAE,CAAC,EAAE,CAAC,OAAO,CAAC,SAAS,EAAE,CAAC,CAAC,MAAM;QACrD,OAAO;YACL,MAAM,WAAW,IAAA,2MAAE;YACnB,MAAM,kHAAE,CAAC,QAAQ,CACf,kHAAE,CAAC,EAAE,CAAC,OAAO,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC;gBAAE,MAAM;gBAAQ,OAAO,KAAK,EAAE;YAAC;QAE3E;IACF;IAEA,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAG,WAAU;0BAAgD;;;;;;YAC7D,MAAM,MAAM,KAAK,kBAChB,6LAAC;gBAAE,WAAU;0BAAsB;;;;;qCAEnC,6LAAC;gBAAI,WAAU;0BACZ,MAAM,GAAG,CAAC,CAAC;oBACV,MAAM,WAAW,KAAK,KAAK,EAAE;oBAC7B,MAAM,cAAc,KAAK,OAAO,EAAE,UAAU;oBAC5C,MAAM,aAAa,KAAK,OAAO,EAAE,KAC/B,CAAC,IAAkC,EAAE,KAAK,EAAE,OAAO,MAAM;oBAE3D,qBACE,6LAAC;wBAEC,WAAU;;4BAET,yBACC,6LAAC;gCACC,KAAK;gCACL,KAAI;gCACJ,WAAU;;;;;qDAGZ,6LAAC;gCAAI,WAAU;0CAAgG;;;;;;0CAIjH,6LAAC;gCAAI,WAAU;0CACb,cAAA,6LAAC;oCACC,MAAK;oCACL,SAAS,IAAM,aAAa,KAAK,EAAE;oCACnC,UAAU,CAAC,MAAM;oCACjB,WAAW,CAAC,gHAAgH,EAC1H,aACI,yBACA,gDACJ;oCACF,OAAO,OAAQ,aAAa,kBAAkB,WAAY;;sDAE1D,6LAAC;4CAAK,WAAU;sDAAgB;;;;;;sDAChC,6LAAC;sDAAK;;;;;;;;;;;;;;;;;;uBA3BL,KAAK,EAAE;;;;;gBAgClB;;;;;;;;;;;;AAKV;GAlGS;;QACM,kHAAE,CAAC;QACmB,kHAAE,CAAC;;;KAF/B;AAoGM,SAAS;IACtB,qBACE;;0BACE,6LAAC,kHAAE,CAAC,QAAQ;0BACV,cAAA,6LAAC,6IAAQ;8BACP,cAAA,6LAAC;;;;;;;;;;;;;;;0BAGL,6LAAC,kHAAE,CAAC,SAAS;0BACX,cAAA,6LAAC,uIAAK;;;;;;;;;;;;AAId;MAbwB"}}]
}