module.exports=[72131,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].React},9270,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.AppRouterContext},38783,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactServerDOMTurbopackClient},36313,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.HooksClientContext},18341,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.ServerInsertedHtml},18622,(a,b,c)=>{b.exports=a.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},42602,(a,b,c)=>{"use strict";b.exports=a.r(18622)},87924,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactJsxRuntime},61501,a=>{"use strict";var b=a.i(87924),c=a.i(8706),d=a.i(42588),e=a.i(86179);a.i(81861);var f=a.i(24249);function g(){let a=c.db.useUser(),{isLoading:d,error:e,data:g}=c.db.useQuery({memes:{image:{},author:{},upvotes:{$user:{}},$:{order:{serverCreatedAt:"desc"}}}});if(d)return(0,b.jsx)("div",{className:"flex items-center justify-center min-h-[40vh]",children:(0,b.jsx)("p",{className:"text-[var(--muted)]",children:"Loading..."})});if(e)return(0,b.jsxs)("div",{className:"p-4 text-red-400",children:["Error: ",e.message]});let h=g?.memes??[],i=async b=>{if(!a?.id)return;let d=h.find(a=>a.id===b);if(!d?.upvotes)return;let e=d.upvotes.find(b=>b.$user?.id===a.id);if(e)await c.db.transact(c.db.tx.upvotes[e.id].delete());else{let d=(0,f.id)();await c.db.transact(c.db.tx.upvotes[d].update({}).link({meme:b,$user:a.id}))}};return(0,b.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-6",children:[(0,b.jsx)("h1",{className:"text-lg font-semibold text-[var(--text)] mb-4",children:"Gallery"}),0===h.length?(0,b.jsx)("p",{className:"text-[var(--muted)]",children:"No memes yet. Create one from the Create page."}):(0,b.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:h.map(c=>{let d=c.image?.url,e=c.upvotes?.length??0,f=c.upvotes?.some(b=>b.$user?.id===a?.id);return(0,b.jsxs)("article",{className:"rounded-xl border border-[var(--border)] bg-[var(--surface)] overflow-hidden",children:[d?(0,b.jsx)("img",{src:d,alt:"Meme",className:"w-full aspect-auto object-contain bg-[#1a1a1a]"}):(0,b.jsx)("div",{className:"w-full aspect-video bg-[#2a2a2a] flex items-center justify-center text-[var(--muted)] text-sm",children:"Loading image..."}),(0,b.jsx)("div",{className:"p-3 flex items-center justify-between",children:(0,b.jsxs)("button",{type:"button",onClick:()=>i(c.id),disabled:!a?.id,className:`flex items-center gap-1.5 text-sm font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed ${f?"text-[var(--accent)]":"text-[var(--muted)] hover:text-[var(--text)]"}`,title:a?f?"Remove upvote":"Upvote":"Sign in to upvote",children:[(0,b.jsx)("span",{className:"tabular-nums",children:e}),(0,b.jsx)("span",{children:"upvote"})]})})]},c.id)})})]})}function h(){return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(c.db.SignedIn,{children:(0,b.jsx)(d.AppShell,{children:(0,b.jsx)(g,{})})}),(0,b.jsx)(c.db.SignedOut,{children:(0,b.jsx)(e.Login,{})})]})}a.s(["default",()=>h])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__70aa725c._.js.map